{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yeral/Downloads/zirako2.0/app/perfil/recolecciones/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card } from \"@/components/ui/card\"\nimport { ChevronLeft, Truck, Calendar, MapPin, Clock, Package, User, Building2 } from \"lucide-react\"\nimport Link from \"next/link\"\n\n// Actualizamos la interfaz para incluir los datos que faltaban\ninterface Recoleccion {\n  id: number\n  direccion: string\n  ciudad: string\n  fecha_programada: string\n  horario_preferido: string\n  descripcion: string\n  estado: string\n  created_at: string\n  codigo_recoleccion?: string  // Agregado\n  tipo_material?: string       // Agregado\n  recolector_nombre?: string   // Agregado\n}\n\nexport default function MisRecoleccionesPage() {\n  const [recolecciones, setRecolecciones] = useState<Recoleccion[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    cargarRecolecciones()\n  }, [])\n\n  const cargarRecolecciones = async () => {\n    try {\n      // Esta API ya devuelve todos los datos necesarios\n      const res = await fetch(\"/api/collections?mis_recolecciones=true\", {\n        credentials: \"include\",\n      })\n      const data = await res.json()\n\n      if (data.success) {\n        setRecolecciones(data.data || [])\n      }\n    } catch (error) {\n      console.error(\"Error cargando recolecciones:\", error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  // Colores consistentes con la vista principal\n  const getEstadoColor = (estado: string) => {\n    switch (estado) {\n      case \"pendiente\": return \"bg-yellow-500/20 text-yellow-400\"\n      case \"confirmada\": return \"bg-blue-500/20 text-blue-400\"\n      case \"en_camino\": return \"bg-purple-500/20 text-purple-400\"\n      case \"completada\": return \"bg-green-500/20 text-green-400\"\n      case \"cancelada\": return \"bg-red-500/20 text-red-400\"\n      default: return \"bg-gray-500/20 text-gray-400\"\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-primary flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-accent\"></div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-primary\">\n      <div className=\"container mx-auto px-4 py-8 max-w-4xl\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-8\">\n          <div className=\"flex items-center gap-4\">\n            <Link href=\"/perfil\">\n              <Button\n                variant=\"outline\"\n                className=\"bg-accent text-accent-foreground border-accent hover:bg-accent/90 h-10 px-4 flex items-center gap-2\"\n              >\n                <ChevronLeft className=\"h-5 w-5\" />\n                Regresar\n              </Button>\n            </Link>\n            <h1 className=\"text-2xl font-bold text-white\">Mis Recolecciones</h1>\n          </div>\n          \n          <Link href=\"/recoleccion?new=true\">\n            <Button className=\"bg-accent text-accent-foreground hover:bg-accent/90 font-bold px-6\">\n              <Truck className=\"h-4 w-4 mr-2\" />\n              Nueva Recolección\n            </Button>\n          </Link>\n        </div>\n\n        {/* Lista de recolecciones */}\n        {recolecciones.length === 0 ? (\n          <Card className=\"bg-secondary border-secondary p-8 text-center\">\n            <Truck className=\"h-12 w-12 text-accent/50 mx-auto mb-4\" />\n            <p className=\"text-primary-foreground/70\">No tienes recolecciones programadas</p>\n            <Link href=\"/recoleccion?new=true\">\n              <Button className=\"mt-4 bg-accent text-accent-foreground hover:bg-accent/90 font-bold\">\n                Programar Nueva Recolección\n              </Button>\n            </Link>\n          </Card>\n        ) : (\n          <div className=\"space-y-4\">\n            {recolecciones.map((rec) => (\n              <Card key={rec.id} className=\"bg-secondary border-secondary p-5 hover:bg-secondary/90 transition-colors\">\n                \n                {/* ENCABEZADO DE LA TARJETA (Igual a la vista principal) */}\n                <div className=\"flex flex-col md:flex-row justify-between md:items-start gap-4 mb-4 border-b border-white/10 pb-4\">\n                  <div className=\"flex items-start gap-3\">\n                    <div className=\"bg-primary p-2 rounded-lg mt-1\">\n                        <Truck className=\"h-6 w-6 text-accent\" />\n                    </div>\n                    <div>\n                      {/* CÓDIGO DE ORDEN Y MATERIAL */}\n                      <p className=\"font-bold text-white text-lg flex items-center gap-2\">\n                          Orden #{rec.codigo_recoleccion || rec.id}\n                          {rec.tipo_material && (\n                              <span className=\"text-xs font-normal bg-white/10 px-2 py-0.5 rounded text-white/80\">\n                                  {rec.tipo_material}\n                              </span>\n                          )}\n                      </p>\n                      {/* EMPRESA ENCARGADA */}\n                      <p className=\"text-xs text-white/50 mt-1 flex items-center gap-1\">\n                          Empresa encargada: \n                          <span className=\"text-white/80 font-medium\">\n                              {rec.recolector_nombre || 'Asignando...'}\n                          </span>\n                      </p>\n                    </div>\n                  </div>\n\n                  {/* ESTADO (Badge a la derecha) */}\n                  <div className=\"flex items-center gap-2 self-start\">\n                    <span className={`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider ${getEstadoColor(rec.estado)}`}>\n                      {rec.estado}\n                    </span>\n                  </div>\n                </div>\n\n                {/* DETALLES (Grid) */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-y-2 gap-x-4 text-sm text-white/80\">\n                  <div className=\"flex items-center gap-2\">\n                      <Calendar className=\"h-4 w-4 text-accent shrink-0\" /> \n                      {new Date(rec.fecha_programada).toLocaleDateString(\"es-CO\")}\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                      <Clock className=\"h-4 w-4 text-accent shrink-0\" /> \n                      {rec.horario_preferido}\n                  </div>\n                  <div className=\"flex items-center gap-2 md:col-span-2\">\n                      <MapPin className=\"h-4 w-4 text-accent shrink-0\" /> \n                      {rec.direccion}, {rec.ciudad}\n                  </div>\n                  {rec.descripcion && (\n                    <div className=\"flex items-start gap-2 md:col-span-2 mt-2 bg-black/20 p-2 rounded\">\n                      <Package className=\"h-4 w-4 text-accent shrink-0 mt-0.5\" />\n                      <span className=\"italic\">{rec.descripcion}</span>\n                    </div>\n                  )}\n                </div>\n              </Card>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AANA;;;;;;;AAuBe,SAAS;IACtB,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,6WAAQ,EAAgB,EAAE;IACpE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,6WAAQ,EAAC;IAEvC,IAAA,8WAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,MAAM,sBAAsB;QAC1B,IAAI;YACF,kDAAkD;YAClD,MAAM,MAAM,MAAM,MAAM,2CAA2C;gBACjE,aAAa;YACf;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,KAAK,OAAO,EAAE;gBAChB,iBAAiB,KAAK,IAAI,IAAI,EAAE;YAClC;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iCAAiC;QACjD,SAAU;YACR,WAAW;QACb;IACF;IAEA,8CAA8C;IAC9C,MAAM,iBAAiB,CAAC;QACtB,OAAQ;YACN,KAAK;gBAAa,OAAO;YACzB,KAAK;gBAAc,OAAO;YAC1B,KAAK;gBAAa,OAAO;YACzB,KAAK;gBAAc,OAAO;YAC1B,KAAK;gBAAa,OAAO;YACzB;gBAAS,OAAO;QAClB;IACF;IAEA,IAAI,SAAS;QACX,qBACE,0YAAC;YAAI,WAAU;sBACb,cAAA,0YAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,qBACE,0YAAC;QAAI,WAAU;kBACb,cAAA,0YAAC;YAAI,WAAU;;8BAEb,0YAAC;oBAAI,WAAU;;sCACb,0YAAC;4BAAI,WAAU;;8CACb,0YAAC,mUAAI;oCAAC,MAAK;8CACT,cAAA,0YAAC,kKAAM;wCACL,SAAQ;wCACR,WAAU;;0DAEV,0YAAC,oVAAW;gDAAC,WAAU;;;;;;4CAAY;;;;;;;;;;;;8CAIvC,0YAAC;oCAAG,WAAU;8CAAgC;;;;;;;;;;;;sCAGhD,0YAAC,mUAAI;4BAAC,MAAK;sCACT,cAAA,0YAAC,kKAAM;gCAAC,WAAU;;kDAChB,0YAAC,8TAAK;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;;;;;;gBAOvC,cAAc,MAAM,KAAK,kBACxB,0YAAC,8JAAI;oBAAC,WAAU;;sCACd,0YAAC,8TAAK;4BAAC,WAAU;;;;;;sCACjB,0YAAC;4BAAE,WAAU;sCAA6B;;;;;;sCAC1C,0YAAC,mUAAI;4BAAC,MAAK;sCACT,cAAA,0YAAC,kKAAM;gCAAC,WAAU;0CAAqE;;;;;;;;;;;;;;;;yCAM3F,0YAAC;oBAAI,WAAU;8BACZ,cAAc,GAAG,CAAC,CAAC,oBAClB,0YAAC,8JAAI;4BAAc,WAAU;;8CAG3B,0YAAC;oCAAI,WAAU;;sDACb,0YAAC;4CAAI,WAAU;;8DACb,0YAAC;oDAAI,WAAU;8DACX,cAAA,0YAAC,8TAAK;wDAAC,WAAU;;;;;;;;;;;8DAErB,0YAAC;;sEAEC,0YAAC;4DAAE,WAAU;;gEAAuD;gEACxD,IAAI,kBAAkB,IAAI,IAAI,EAAE;gEACvC,IAAI,aAAa,kBACd,0YAAC;oEAAK,WAAU;8EACX,IAAI,aAAa;;;;;;;;;;;;sEAK9B,0YAAC;4DAAE,WAAU;;gEAAqD;8EAE9D,0YAAC;oEAAK,WAAU;8EACX,IAAI,iBAAiB,IAAI;;;;;;;;;;;;;;;;;;;;;;;;sDAOtC,0YAAC;4CAAI,WAAU;sDACb,cAAA,0YAAC;gDAAK,WAAW,CAAC,kEAAkE,EAAE,eAAe,IAAI,MAAM,GAAG;0DAC/G,IAAI,MAAM;;;;;;;;;;;;;;;;;8CAMjB,0YAAC;oCAAI,WAAU;;sDACb,0YAAC;4CAAI,WAAU;;8DACX,0YAAC,uUAAQ;oDAAC,WAAU;;;;;;gDACnB,IAAI,KAAK,IAAI,gBAAgB,EAAE,kBAAkB,CAAC;;;;;;;sDAEvD,0YAAC;4CAAI,WAAU;;8DACX,0YAAC,8TAAK;oDAAC,WAAU;;;;;;gDAChB,IAAI,iBAAiB;;;;;;;sDAE1B,0YAAC;4CAAI,WAAU;;8DACX,0YAAC,qUAAM;oDAAC,WAAU;;;;;;gDACjB,IAAI,SAAS;gDAAC;gDAAG,IAAI,MAAM;;;;;;;wCAE/B,IAAI,WAAW,kBACd,0YAAC;4CAAI,WAAU;;8DACb,0YAAC,oUAAO;oDAAC,WAAU;;;;;;8DACnB,0YAAC;oDAAK,WAAU;8DAAU,IAAI,WAAW;;;;;;;;;;;;;;;;;;;2BArDtC,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;;AAgE/B","debugId":null}}]
}