{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yeral/Downloads/zirako2.0/components/ui/dialog.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\nimport { XIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn('text-lg leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,0YAAC,oTAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,0YAAC,uTAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,0YAAC,sTAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,0YAAC,qTAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,0YAAC,uTAAuB;QACtB,aAAU;QACV,WAAW,IAAA,+IAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,0YAAC;QAAa,aAAU;;0BACtB,0YAAC;;;;;0BACD,0YAAC,uTAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,+IAAE,EACX,+WACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,0YAAC,qTAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,0YAAC,0TAAK;;;;;0CACN,0YAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,0YAAC;QACC,aAAU;QACV,WAAW,IAAA,+IAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,0YAAC;QACC,aAAU;QACV,WAAW,IAAA,+IAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,0YAAC,qTAAqB;QACpB,aAAU;QACV,WAAW,IAAA,+IAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,0YAAC,2TAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,+IAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yeral/Downloads/zirako2.0/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<\"textarea\">>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-20 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className,\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,+WAAgB,CAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,0YAAC;QACC,WAAW,IAAA,+IAAE,EACX,mTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 213, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yeral/Downloads/zirako2.0/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\")\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> & VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root ref={ref} className={cn(labelVariants(), className)} {...props} />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,IAAA,+QAAG,EAAC;AAE1B,MAAM,sBAAQ,+WAAgB,CAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,0YAAC,mTAAmB;QAAC,KAAK;QAAK,WAAW,IAAA,+IAAE,EAAC,iBAAiB;QAAa,GAAG,KAAK;;;;;;AAErF,MAAM,WAAW,GAAG,mTAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 244, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yeral/Downloads/zirako2.0/components/ui/badge.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst badgeVariants = cva(\n  'inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden',\n  {\n    variants: {\n      variant: {\n        default:\n          'border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90',\n        secondary:\n          'border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90',\n        destructive:\n          'border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'span'> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : 'span'\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,+QAAG,EACvB,kZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,yUAAI,GAAG;IAE9B,qBACE,0YAAC;QACC,aAAU;QACV,WAAW,IAAA,+IAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 290, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yeral/Downloads/zirako2.0/components/ui/scroll-area.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as ScrollAreaPrimitive from '@radix-ui/react-scroll-area'\n\nimport { cn } from '@/lib/utils'\n\nfunction ScrollArea({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {\n  return (\n    <ScrollAreaPrimitive.Root\n      data-slot=\"scroll-area\"\n      className={cn('relative', className)}\n      {...props}\n    >\n      <ScrollAreaPrimitive.Viewport\n        data-slot=\"scroll-area-viewport\"\n        className=\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\"\n      >\n        {children}\n      </ScrollAreaPrimitive.Viewport>\n      <ScrollBar />\n      <ScrollAreaPrimitive.Corner />\n    </ScrollAreaPrimitive.Root>\n  )\n}\n\nfunction ScrollBar({\n  className,\n  orientation = 'vertical',\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {\n  return (\n    <ScrollAreaPrimitive.ScrollAreaScrollbar\n      data-slot=\"scroll-area-scrollbar\"\n      orientation={orientation}\n      className={cn(\n        'flex touch-none p-px transition-colors select-none',\n        orientation === 'vertical' &&\n          'h-full w-2.5 border-l border-l-transparent',\n        orientation === 'horizontal' &&\n          'h-2.5 flex-col border-t border-t-transparent',\n        className,\n      )}\n      {...props}\n    >\n      <ScrollAreaPrimitive.ScrollAreaThumb\n        data-slot=\"scroll-area-thumb\"\n        className=\"bg-border relative flex-1 rounded-full\"\n      />\n    </ScrollAreaPrimitive.ScrollAreaScrollbar>\n  )\n}\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OACmD;IACtD,qBACE,0YAAC,sTAAwB;QACvB,aAAU;QACV,WAAW,IAAA,+IAAE,EAAC,YAAY;QACzB,GAAG,KAAK;;0BAET,0YAAC,0TAA4B;gBAC3B,aAAU;gBACV,WAAU;0BAET;;;;;;0BAEH,0YAAC;;;;;0BACD,0YAAC,wTAA0B;;;;;;;;;;;AAGjC;AAEA,SAAS,UAAU,EACjB,SAAS,EACT,cAAc,UAAU,EACxB,GAAG,OACkE;IACrE,qBACE,0YAAC,qUAAuC;QACtC,aAAU;QACV,aAAa;QACb,WAAW,IAAA,+IAAE,EACX,sDACA,gBAAgB,cACd,8CACF,gBAAgB,gBACd,gDACF;QAED,GAAG,KAAK;kBAET,cAAA,0YAAC,iUAAmC;YAClC,aAAU;YACV,WAAU;;;;;;;;;;;AAIlB","debugId":null}},
    {"offset": {"line": 360, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yeral/Downloads/zirako2.0/components/product-selector.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Badge } from \"@/components/ui/badge\"\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\"\r\nimport { Loader2, Package, CheckCircle2, Plus } from \"lucide-react\"\r\nimport Image from \"next/image\"\r\nimport Link from \"next/link\"\r\nimport { Button } from \"@/components/ui/button\"\r\n\r\ninterface Item {\r\n  id: number\r\n  titulo: string\r\n  imagenes: string[]\r\n  estado: string\r\n  tipo: string\r\n}\r\n\r\ninterface ProductSelectorProps {\r\n  userId: number | null\r\n  selectedId: number | null\r\n  onSelect: (id: number) => void\r\n}\r\n\r\nexport function ProductSelector({ userId, selectedId, onSelect }: ProductSelectorProps) {\r\n  const [items, setItems] = useState<Item[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      fetchUserItems()\r\n    }\r\n  }, [userId])\r\n\r\n  const fetchUserItems = async () => {\r\n    try {\r\n      // Usamos la API existente de mis-articulos\r\n      const res = await fetch(`/api/items/mis-articulos?userId=${userId}`)\r\n      const data = await res.json()\r\n      if (data.success) {\r\n        // Solo mostramos items disponibles para intercambiar\r\n        const disponibles = data.data.filter((i: Item) => i.estado === 'disponible')\r\n        setItems(disponibles)\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error cargando items:\", error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return <div className=\"flex justify-center p-8\"><Loader2 className=\"h-8 w-8 animate-spin text-accent\" /></div>\r\n  }\r\n\r\n  if (items.length === 0) {\r\n    return (\r\n      <div className=\"text-center p-6 border-2 border-dashed border-white/20 rounded-lg bg-white/5\">\r\n        <Package className=\"h-12 w-12 text-white/30 mx-auto mb-3\" />\r\n        <p className=\"text-white/80 font-medium\">No tienes artículos disponibles</p>\r\n        <p className=\"text-white/50 text-sm mb-4\">Publica algo para poder intercambiar.</p>\r\n        <Link href=\"/publicar\">\r\n          <Button variant=\"outline\" size=\"sm\" className=\"border-accent text-accent hover:bg-accent/10\">\r\n            <Plus className=\"h-4 w-4 mr-2\" /> Publicar ahora\r\n          </Button>\r\n        </Link>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <p className=\"text-sm text-primary-foreground/70 mb-2\">Selecciona qué artículo ofreces:</p>\r\n      <ScrollArea className=\"h-[300px] pr-4\">\r\n        <div className=\"grid grid-cols-1 gap-3\">\r\n          {items.map((item) => (\r\n            <div\r\n              key={item.id}\r\n              onClick={() => onSelect(item.id)}\r\n              className={`\r\n                relative flex items-center gap-3 p-3 rounded-lg border-2 cursor-pointer transition-all\r\n                ${selectedId === item.id \r\n                  ? \"border-orange-500 bg-orange-500/10\" \r\n                  : \"border-transparent bg-white/5 hover:bg-white/10 hover:border-white/20\"}\r\n              `}\r\n            >\r\n              {/* Imagen pequeña */}\r\n              <div className=\"relative h-16 w-16 rounded-md overflow-hidden bg-black/20 flex-shrink-0\">\r\n                {item.imagenes?.[0] ? (\r\n                  <Image src={item.imagenes[0]} alt={item.titulo} fill className=\"object-cover\" />\r\n                ) : (\r\n                  <Package className=\"h-8 w-8 text-white/20 m-auto\" />\r\n                )}\r\n              </div>\r\n\r\n              {/* Info */}\r\n              <div className=\"flex-1 min-w-0 text-left\">\r\n                <p className={`font-semibold truncate ${selectedId === item.id ? \"text-orange-400\" : \"text-white\"}`}>\r\n                  {item.titulo}\r\n                </p>\r\n                <Badge variant=\"outline\" className=\"text-xs text-white/50 border-white/20 mt-1 capitalize\">\r\n                  {item.tipo}\r\n                </Badge>\r\n              </div>\r\n\r\n              {/* Check de selección */}\r\n              {selectedId === item.id && (\r\n                <div className=\"absolute right-3 top-1/2 -translate-y-1/2\">\r\n                  <CheckCircle2 className=\"h-6 w-6 text-orange-500 fill-orange-500/20\" />\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </ScrollArea>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AATA;;;;;;;;;AAyBO,SAAS,gBAAgB,EAAE,MAAM,EAAE,UAAU,EAAE,QAAQ,EAAwB;IACpF,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6WAAQ,EAAS,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,6WAAQ,EAAC;IAEvC,IAAA,8WAAS,EAAC;QACR,IAAI,QAAQ;YACV;QACF;IACF,GAAG;QAAC;KAAO;IAEX,MAAM,iBAAiB;QACrB,IAAI;YACF,2CAA2C;YAC3C,MAAM,MAAM,MAAM,MAAM,CAAC,gCAAgC,EAAE,QAAQ;YACnE,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,KAAK,OAAO,EAAE;gBAChB,qDAAqD;gBACrD,MAAM,cAAc,KAAK,IAAI,CAAC,MAAM,CAAC,CAAC,IAAY,EAAE,MAAM,KAAK;gBAC/D,SAAS;YACX;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;QACzC,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAI,SAAS;QACX,qBAAO,0YAAC;YAAI,WAAU;sBAA0B,cAAA,0YAAC,6UAAO;gBAAC,WAAU;;;;;;;;;;;IACrE;IAEA,IAAI,MAAM,MAAM,KAAK,GAAG;QACtB,qBACE,0YAAC;YAAI,WAAU;;8BACb,0YAAC,oUAAO;oBAAC,WAAU;;;;;;8BACnB,0YAAC;oBAAE,WAAU;8BAA4B;;;;;;8BACzC,0YAAC;oBAAE,WAAU;8BAA6B;;;;;;8BAC1C,0YAAC,mUAAI;oBAAC,MAAK;8BACT,cAAA,0YAAC,kKAAM;wBAAC,SAAQ;wBAAU,MAAK;wBAAK,WAAU;;0CAC5C,0YAAC,2TAAI;gCAAC,WAAU;;;;;;4BAAiB;;;;;;;;;;;;;;;;;;IAK3C;IAEA,qBACE,0YAAC;QAAI,WAAU;;0BACb,0YAAC;gBAAE,WAAU;0BAA0C;;;;;;0BACvD,0YAAC,8KAAU;gBAAC,WAAU;0BACpB,cAAA,0YAAC;oBAAI,WAAU;8BACZ,MAAM,GAAG,CAAC,CAAC,qBACV,0YAAC;4BAEC,SAAS,IAAM,SAAS,KAAK,EAAE;4BAC/B,WAAW,CAAC;;gBAEV,EAAE,eAAe,KAAK,EAAE,GACpB,uCACA,wEAAwE;cAC9E,CAAC;;8CAGD,0YAAC;oCAAI,WAAU;8CACZ,KAAK,QAAQ,EAAE,CAAC,EAAE,iBACjB,0YAAC,oSAAK;wCAAC,KAAK,KAAK,QAAQ,CAAC,EAAE;wCAAE,KAAK,KAAK,MAAM;wCAAE,IAAI;wCAAC,WAAU;;;;;6DAE/D,0YAAC,oUAAO;wCAAC,WAAU;;;;;;;;;;;8CAKvB,0YAAC;oCAAI,WAAU;;sDACb,0YAAC;4CAAE,WAAW,CAAC,uBAAuB,EAAE,eAAe,KAAK,EAAE,GAAG,oBAAoB,cAAc;sDAChG,KAAK,MAAM;;;;;;sDAEd,0YAAC,gKAAK;4CAAC,SAAQ;4CAAU,WAAU;sDAChC,KAAK,IAAI;;;;;;;;;;;;gCAKb,eAAe,KAAK,EAAE,kBACrB,0YAAC;oCAAI,WAAU;8CACb,cAAA,0YAAC,sVAAY;wCAAC,WAAU;;;;;;;;;;;;2BA/BvB,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;AAwC1B","debugId":null}},
    {"offset": {"line": 598, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yeral/Downloads/zirako2.0/components/item-action-buttons.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/components/ui/dialog\"\r\nimport { Textarea } from \"@/components/ui/textarea\"\r\nimport { Input } from \"@/components/ui/input\" \r\nimport { Label } from \"@/components/ui/label\" \r\nimport { ShoppingCart, Repeat, Gift, Edit, Loader2, CheckCircle, AlertCircle, DollarSign, Lock } from \"lucide-react\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { ProductSelector } from \"@/components/product-selector\" \r\n\r\ninterface ItemActionsProps {\r\n  item: any\r\n  isOwner: boolean\r\n  currentUserId: number | null\r\n}\r\n\r\nexport default function ItemActionsButtons({ item, isOwner, currentUserId }: ItemActionsProps) {\r\n  const router = useRouter()\r\n  const [showProposalModal, setShowProposalModal] = useState(false)\r\n  const [proposalType, setProposalType] = useState<\"compra\" | \"intercambio\" | \"donacion\">(\"compra\")\r\n  \r\n  const [mensaje, setMensaje] = useState(\"\")\r\n  const [ofertaPrecio, setOfertaPrecio] = useState(\"\") \r\n  const [selectedExchangeId, setSelectedExchangeId] = useState<number | null>(null)\r\n\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [showSuccess, setShowSuccess] = useState(false)\r\n  const [error, setError] = useState(\"\")\r\n\r\n  // CASO 1: Artículo ya no disponible\r\n  if (item.estado === 'completado' || item.estado === 'eliminado') {\r\n      return (\r\n        <div className=\"mt-6 p-6 bg-gray-500/20 rounded-xl text-center border border-white/10\">\r\n            <div className=\"flex justify-center mb-2\"><Lock className=\"h-8 w-8 text-gray-400\"/></div>\r\n            <p className=\"text-lg font-bold text-gray-300\">Artículo No Disponible</p>\r\n            <p className=\"text-sm text-gray-400 mt-1\">Este artículo ya no se encuentra activo.</p>\r\n        </div>\r\n      )\r\n  }\r\n\r\n  // CASO 2: Eres el dueño\r\n  if (isOwner) {\r\n    return (\r\n      <div className=\"flex flex-col gap-3 mt-6 p-4 bg-accent/10 rounded-xl border border-accent/20\">\r\n        <p className=\"text-center text-primary-foreground/80 text-sm font-medium mb-2\">\r\n          Eres el propietario de esta publicación\r\n        </p>\r\n        <Button\r\n          onClick={() => router.push(`/editar-item/${item.id}`)} \r\n          className=\"w-full h-12 text-lg bg-accent text-accent-foreground hover:bg-accent/90 font-bold\"\r\n        >\r\n          <Edit className=\"h-5 w-5 mr-2\" />\r\n          Editar Artículo\r\n        </Button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // CASO 3: Usuario normal (Botones únicos por tipo)\r\n  const openModal = (type: \"compra\" | \"intercambio\" | \"donacion\") => {\r\n    if (!currentUserId) {\r\n      router.push(\"/auth/login\")\r\n      return\r\n    }\r\n    setProposalType(type)\r\n    setMensaje(\"\")\r\n    setOfertaPrecio(\"\")\r\n    setSelectedExchangeId(null)\r\n    setError(\"\")\r\n    setShowProposalModal(true)\r\n  }\r\n\r\n  const formatCurrency = (val: string) => val.replace(/\\D/g, \"\")\r\n\r\n  const handleSendProposal = async () => {\r\n      setError(\"\")\r\n      setIsLoading(true);\r\n\r\n      try {\r\n        let endpoint = \"/api/contactar\" \r\n        let body: any = {}\r\n\r\n        if (proposalType === \"intercambio\") {\r\n            if (!selectedExchangeId) throw new Error(\"Debes seleccionar un artículo para intercambiar\")\r\n            endpoint = \"/api/exchanges\"\r\n            body = {\r\n                item_ofrecido_id: selectedExchangeId,\r\n                item_solicitado_id: item.id,\r\n                mensaje: \"Propuesta de intercambio enviada.\"\r\n            }\r\n        } else {\r\n            if (proposalType === \"compra\" && !ofertaPrecio) throw new Error(\"Por favor ingresa el valor de tu oferta\")\r\n            if (!mensaje.trim()) throw new Error(\"Por favor escribe un mensaje\")\r\n            \r\n            body = {\r\n                itemId: item.id, \r\n                itemName: item.titulo, \r\n                sellerEmail: item.email_vendedor, \r\n                sellerName: item.nombre_vendedor,\r\n                mensaje: mensaje, \r\n                tipo: proposalType,\r\n                ofertaPrecio: proposalType === 'compra' ? ofertaPrecio : 0\r\n            }\r\n        }\r\n\r\n        const response = await fetch(endpoint, { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify(body) })\r\n        const data = await response.json()\r\n        if (!response.ok) throw new Error(data.error || \"Error al procesar la solicitud\")\r\n\r\n        setShowProposalModal(false)\r\n        setShowSuccess(true)\r\n\r\n      } catch (err: any) { setError(err.message) } \r\n      finally { setIsLoading(false) }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-4 mt-6\">\r\n      {/* BOTONES SEGÚN EL TIPO */}\r\n      {item.tipo === \"venta\" && (\r\n        <Button onClick={() => openModal(\"compra\")} className=\"w-full h-14 text-xl bg-emerald-600 text-white hover:bg-emerald-700 font-bold shadow-lg\">\r\n          <ShoppingCart className=\"h-6 w-6 mr-2\" /> Hacer Oferta\r\n        </Button>\r\n      )}\r\n\r\n      {item.tipo === \"intercambio\" && (\r\n        <Button onClick={() => openModal(\"intercambio\")} className=\"w-full h-14 text-xl bg-orange-500 text-white hover:bg-orange-600 font-bold shadow-lg\">\r\n          <Repeat className=\"h-6 w-6 mr-2\" /> Proponer Intercambio\r\n        </Button>\r\n      )}\r\n\r\n      {item.tipo === \"donacion\" && (\r\n        <Button onClick={() => openModal(\"donacion\")} className=\"w-full h-14 text-xl bg-purple-600 text-white hover:bg-purple-700 font-bold shadow-lg\">\r\n          <Gift className=\"h-6 w-6 mr-2\" /> Solicitar Donación\r\n        </Button>\r\n      )}\r\n\r\n      {/* MODAL PROPUESTA */}\r\n      <Dialog open={showProposalModal} onOpenChange={setShowProposalModal}>\r\n        <DialogContent className=\"bg-secondary border-secondary text-primary-foreground sm:max-w-md\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"flex items-center gap-2 text-xl\">\r\n              {proposalType === \"compra\" && \"Tu Oferta de Compra\"}\r\n              {proposalType === \"intercambio\" && \"Elige qué ofrecer\"}\r\n              {proposalType === \"donacion\" && \"Solicitud de Donación\"}\r\n            </DialogTitle>\r\n            <DialogDescription className=\"text-primary-foreground/70\">\r\n                Esta solicitud quedará registrada y el dueño recibirá una notificación.\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          <div className=\"py-4 space-y-4\">\r\n            {error && <div className=\"bg-red-500/20 text-red-200 p-3 rounded-md flex items-center gap-2 text-sm border border-red-500/50\"><AlertCircle className=\"h-4 w-4\" /> {error}</div>}\r\n\r\n            {proposalType === \"intercambio\" && <ProductSelector userId={currentUserId} selectedId={selectedExchangeId} onSelect={setSelectedExchangeId} />}\r\n\r\n            {proposalType === \"compra\" && (\r\n                <div className=\"space-y-2\">\r\n                    <Label className=\"text-primary-foreground\">Tu Oferta ($ COP)</Label>\r\n                    <div className=\"relative\">\r\n                        <DollarSign className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500\"/>\r\n                        <Input type=\"number\" value={ofertaPrecio} onChange={(e) => setOfertaPrecio(formatCurrency(e.target.value))} placeholder=\"Ej: 150000\" className=\"pl-9 bg-white text-gray-900 border-none h-12 text-lg font-semibold\"/>\r\n                    </div>\r\n                    <p className=\"text-xs text-primary-foreground/60 text-right\">Precio publicado: {new Intl.NumberFormat(\"es-CO\", { style: \"currency\", currency: \"COP\", minimumFractionDigits: 0 }).format(item.precio)}</p>\r\n                </div>\r\n            )}\r\n\r\n            {proposalType !== 'intercambio' && (\r\n                <div className=\"space-y-2\">\r\n                    <Label className=\"text-primary-foreground\">Mensaje para el vendedor</Label>\r\n                    <Textarea value={mensaje} onChange={(e) => setMensaje(e.target.value)} placeholder={proposalType === \"compra\" ? \"Ej: Puedo recogerlo mañana...\" : \"Hola, me gustaría recibir esta donación...\"} className=\"bg-primary/50 border-white/10 min-h-[100px] text-white placeholder:text-white/40\"/>\r\n                </div>\r\n            )}\r\n          </div>\r\n\r\n          <Button onClick={handleSendProposal} disabled={isLoading} className={`w-full h-12 text-lg font-bold ${proposalType === \"compra\" ? \"bg-emerald-600 hover:bg-emerald-700\" : proposalType === \"intercambio\" ? \"bg-orange-500 hover:bg-orange-600\" : \"bg-purple-600 hover:bg-purple-700\"}`}>\r\n            {isLoading ? <Loader2 className=\"h-5 w-5 animate-spin mr-2\"/> : \"Enviar Solicitud\"}\r\n          </Button>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n       {/* MODAL ÉXITO CORREGIDO */}\r\n       <Dialog open={showSuccess} onOpenChange={setShowSuccess}>\r\n        <DialogContent className=\"bg-secondary border-secondary text-primary-foreground sm:max-w-md text-center\">\r\n           {/* Aquí agregamos DialogHeader y DialogTitle para accesibilidad */}\r\n           <DialogHeader>\r\n               <div className=\"flex justify-center mb-4\">\r\n                   <div className=\"bg-green-500/20 rounded-full p-4\">\r\n                       <CheckCircle className=\"h-12 w-12 text-green-500\" />\r\n                   </div>\r\n               </div>\r\n               <DialogTitle className=\"text-xl font-bold mb-2 text-center text-primary-foreground\">\r\n                   ¡Solicitud Enviada!\r\n               </DialogTitle>\r\n               <DialogDescription className=\"text-primary-foreground/70 mb-4 text-center\">\r\n                   El dueño ha sido notificado y la solicitud quedó registrada en tu historial.\r\n               </DialogDescription>\r\n           </DialogHeader>\r\n           \r\n           <Button onClick={() => setShowSuccess(false)} className=\"w-full bg-accent text-accent-foreground mt-2\">\r\n               Entendido\r\n           </Button>\r\n        </DialogContent>\r\n       </Dialog>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}