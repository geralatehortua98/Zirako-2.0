{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yeral/Downloads/zirako2.0/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\")\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> & VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root ref={ref} className={cn(labelVariants(), className)} {...props} />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,IAAA,+QAAG,EAAC;AAE1B,MAAM,sBAAQ,+WAAgB,CAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,0YAAC,mTAAmB;QAAC,KAAK;QAAK,WAAW,IAAA,+IAAE,EAAC,iBAAiB;QAAa,GAAG,KAAK;;;;;;AAErF,MAAM,WAAW,GAAG,mTAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yeral/Downloads/zirako2.0/app/perfil/configuracion/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { ChevronLeft, Save, User, Phone, MapPin } from \"lucide-react\"\nimport Link from \"next/link\"\n\nconst ciudadesValle = [\n  \"Cali\", \"Palmira\", \"Buenaventura\", \"Tuluá\", \"Cartago\", \n  \"Buga\", \"Jamundí\", \"Yumbo\", \"Sevilla\", \"Candelaria\",\n]\n\nexport default function ConfiguracionPage() {\n  const [loading, setLoading] = useState(false)\n  const [mensaje, setMensaje] = useState<{ tipo: \"success\" | \"error\"; texto: string } | null>(null)\n  \n  // Estado limpio: Solo los campos que existen en la BD\n  const [perfil, setPerfil] = useState({\n    nombre: \"\",\n    telefono: \"\",\n    ciudad: \"Cali\",\n    direccion: \"\",\n  })\n\n  useEffect(() => {\n    cargarPerfil()\n  }, [])\n\n  const cargarPerfil = async () => {\n    try {\n      const res = await fetch(\"/api/usuarios/perfil\", { credentials: \"include\" })\n      const data = await res.json()\n      if (data.success) {\n        setPerfil({\n          nombre: data.data.nombre || \"\",\n          telefono: data.data.telefono || \"\",\n          ciudad: data.data.ciudad || \"Cali\",\n          direccion: data.data.direccion || \"\",\n        })\n      }\n    } catch (error) {\n      console.error(\"Error cargando perfil:\", error)\n    }\n  }\n\n  const guardarPerfil = async () => {\n    setLoading(true)\n    setMensaje(null)\n\n    try {\n      // Enviamos el objeto perfil limpio\n      const res = await fetch(\"/api/usuarios/perfil\", {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        credentials: \"include\",\n        body: JSON.stringify(perfil),\n      })\n\n      const data = await res.json()\n\n      if (data.success) {\n        setMensaje({ tipo: \"success\", texto: \"Perfil actualizado correctamente\" })\n        \n        // Actualizar localStorage para que se refleje inmediatamente en el dashboard\n        if(perfil.nombre) localStorage.setItem(\"zirako_user_name\", perfil.nombre)\n        \n      } else {\n        setMensaje({ tipo: \"error\", texto: data.error || \"Error al actualizar\" })\n      }\n    } catch (error) {\n      setMensaje({ tipo: \"error\", texto: \"Error de conexión\" })\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-primary\">\n      <div className=\"container mx-auto px-4 py-8 max-w-2xl\">\n        {/* Header */}\n        <div className=\"flex items-center gap-4 mb-8\">\n          <Link href=\"/perfil\">\n            <Button\n              variant=\"outline\"\n              className=\"bg-accent text-accent-foreground border-accent hover:bg-accent/90 h-10 px-4 flex items-center gap-2\"\n            >\n              <ChevronLeft className=\"h-5 w-5\" />\n              Regresar\n            </Button>\n          </Link>\n          <h1 className=\"text-2xl font-bold text-white\">Configuración del Perfil</h1>\n        </div>\n\n        {mensaje && (\n          <div\n            className={`p-4 rounded-lg mb-6 ${\n              mensaje.tipo === \"success\"\n                ? \"bg-green-900/50 text-green-400 border border-green-700\"\n                : \"bg-red-900/50 text-red-400 border border-red-700\"\n            }`}\n          >\n            {mensaje.texto}\n          </div>\n        )}\n\n        <Card className=\"bg-secondary border-secondary p-6\">\n          <div className=\"space-y-6\">\n            \n            {/* Nombre */}\n            <div>\n              <Label className=\"text-primary-foreground flex items-center gap-2 mb-2\">\n                <User className=\"h-4 w-4\" />\n                Nombre completo / Razón Social\n              </Label>\n              <Input\n                value={perfil.nombre}\n                onChange={(e) => setPerfil({ ...perfil, nombre: e.target.value })}\n                className=\"bg-white text-gray-900 border-gray-300\"\n                placeholder=\"Tu nombre completo\"\n              />\n            </div>\n\n            {/* Teléfono */}\n            <div>\n              <Label className=\"text-primary-foreground flex items-center gap-2 mb-2\">\n                <Phone className=\"h-4 w-4\" />\n                Teléfono\n              </Label>\n              <Input\n                value={perfil.telefono}\n                onChange={(e) => setPerfil({ ...perfil, telefono: e.target.value })}\n                className=\"bg-white text-gray-900 border-gray-300\"\n                placeholder=\"Tu número de teléfono\"\n              />\n            </div>\n\n            {/* Ciudad */}\n            <div>\n              <Label className=\"text-primary-foreground flex items-center gap-2 mb-2\">\n                <MapPin className=\"h-4 w-4\" />\n                Ciudad\n              </Label>\n              <select\n                value={perfil.ciudad}\n                onChange={(e) => setPerfil({ ...perfil, ciudad: e.target.value })}\n                className=\"w-full h-10 px-3 rounded-md bg-white text-gray-900 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-accent\"\n              >\n                {ciudadesValle.map((ciudad) => (\n                  <option key={ciudad} value={ciudad}>\n                    {ciudad}, Valle del Cauca\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Dirección */}\n            <div>\n              <Label className=\"text-primary-foreground flex items-center gap-2 mb-2\">\n                <MapPin className=\"h-4 w-4\" />\n                Dirección\n              </Label>\n              <Input\n                value={perfil.direccion}\n                onChange={(e) => setPerfil({ ...perfil, direccion: e.target.value })}\n                className=\"bg-white text-gray-900 border-gray-300\"\n                placeholder=\"Tu dirección completa\"\n              />\n            </div>\n\n            <Button\n              onClick={guardarPerfil}\n              disabled={loading}\n              className=\"w-full bg-accent text-accent-foreground hover:bg-accent/90 h-12 font-bold text-lg\"\n            >\n              {loading ? (\n                <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-current\" />\n              ) : (\n                <>\n                  <Save className=\"h-5 w-5 mr-2\" />\n                  Guardar Cambios\n                </>\n              )}\n            </Button>\n          </div>\n        </Card>\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}}]
}