{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yeral/Downloads/zirako2.0/app/perfil/intercambios/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card } from \"@/components/ui/card\"\nimport { ChevronLeft, RefreshCw, Loader2, Package } from \"lucide-react\"\nimport Link from \"next/link\"\nimport Image from \"next/image\"\n\ninterface Intercambio {\n  id: number\n  titulo_ofrecido: string\n  titulo_solicitado: string\n  nombre_propone: string\n  nombre_recibe: string\n  estado: string\n  created_at: string\n  imagenes_ofrecido: string[]\n  imagenes_solicitado: string[]\n  usuario_propone_id: number\n  usuario_recibe_id: number\n}\n\nexport default function MisIntercambiosPage() {\n  const [intercambios, setIntercambios] = useState<Intercambio[]>([])\n  const [loading, setLoading] = useState(true)\n  const [userId, setUserId] = useState<number | null>(null)\n\n  useEffect(() => {\n    const storedId = localStorage.getItem(\"zirako_user_id\")\n    if (storedId) setUserId(Number(storedId))\n    cargarIntercambios()\n  }, [])\n\n  const cargarIntercambios = async () => {\n    try {\n      const res = await fetch(\"/api/exchanges\", { credentials: \"include\" })\n      const data = await res.json()\n\n      if (data.success) {\n        setIntercambios(data.data || [])\n      }\n    } catch (error) {\n      console.error(\"Error cargando intercambios:\", error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const getEstadoColor = (estado: string) => {\n    switch (estado) {\n        case 'pendiente': return 'bg-yellow-500/20 text-yellow-500';\n        case 'aceptado': return 'bg-green-500/20 text-green-400';\n        case 'rechazado': return 'bg-red-500/20 text-red-400';\n        case 'completado': return 'bg-blue-500/20 text-blue-400';\n        default: return 'bg-gray-500/20 text-gray-400';\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-primary flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-accent\"></div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-primary\">\n      <div className=\"container mx-auto px-4 py-8 max-w-4xl\">\n        {/* Header */}\n        <div className=\"flex items-center gap-4 mb-8\">\n          <Link href=\"/perfil\">\n            <Button\n              variant=\"outline\"\n              className=\"bg-accent text-accent-foreground border-accent hover:bg-accent/90 h-10 px-4 flex items-center gap-2\"\n            >\n              <ChevronLeft className=\"h-5 w-5\" />\n              Regresar\n            </Button>\n          </Link>\n          <h1 className=\"text-2xl font-bold text-white\">Mis Intercambios</h1>\n        </div>\n\n        {/* Lista de intercambios */}\n        {intercambios.length === 0 ? (\n            <Card className=\"bg-secondary border-secondary p-12 text-center text-white/70\">\n                <RefreshCw className=\"h-16 w-16 mx-auto mb-4 opacity-50\"/>\n                <p className=\"text-lg\">No has realizado intercambios aún.</p>\n                <Link href=\"/buscar?q=intercambio\">\n                    <Button className=\"mt-4 bg-accent text-accent-foreground\">Buscar artículos</Button>\n                </Link>\n            </Card>\n        ) : (\n            <div className=\"space-y-4\">\n            {intercambios.map((intercambio) => {\n                const soyPropone = userId === intercambio.usuario_propone_id\n                const otroUsuario = soyPropone ? intercambio.nombre_recibe : intercambio.nombre_propone\n                \n                return (\n                    <Card key={intercambio.id} className=\"bg-secondary border-secondary p-4 overflow-hidden\">\n                    <div className=\"flex flex-col md:flex-row items-center gap-4\">\n                        \n                        {/* Estado */}\n                        <div className=\"md:w-32 flex-shrink-0 text-center\">\n                            <span className={`text-xs px-3 py-1 rounded-full uppercase font-bold ${getEstadoColor(intercambio.estado)}`}>\n                                {intercambio.estado}\n                            </span>\n                            <p className=\"text-xs text-white/40 mt-2\">{new Date(intercambio.created_at).toLocaleDateString()}</p>\n                        </div>\n\n                        {/* Detalles del intercambio */}\n                        <div className=\"flex-1 flex items-center justify-between w-full bg-primary/30 p-3 rounded-lg border border-white/5\">\n                            {/* Lo que di */}\n                            <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                                <div className=\"relative w-12 h-12 rounded bg-black/20 flex-shrink-0 overflow-hidden\">\n                                    <Image src={intercambio.imagenes_ofrecido[0] || '/placeholder.svg'} alt=\"item\" fill className=\"object-cover\"/>\n                                </div>\n                                <div className=\"min-w-0\">\n                                    <p className=\"text-xs text-white/50\">Ofrecido</p>\n                                    <p className=\"font-bold text-white text-sm truncate\">{intercambio.titulo_ofrecido}</p>\n                                </div>\n                            </div>\n\n                            <RefreshCw className=\"h-5 w-5 text-accent mx-2 flex-shrink-0\" />\n\n                            {/* Lo que recibí */}\n                            <div className=\"flex items-center gap-3 flex-1 min-w-0 justify-end text-right\">\n                                <div className=\"min-w-0\">\n                                    <p className=\"text-xs text-white/50\">Solicitado</p>\n                                    <p className=\"font-bold text-white text-sm truncate\">{intercambio.titulo_solicitado}</p>\n                                </div>\n                                <div className=\"relative w-12 h-12 rounded bg-black/20 flex-shrink-0 overflow-hidden\">\n                                    <Image src={intercambio.imagenes_solicitado[0] || '/placeholder.svg'} alt=\"item\" fill className=\"object-cover\"/>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <div className=\"mt-2 text-right\">\n                        <p className=\"text-xs text-white/40\">Intercambio con: <span className=\"text-white/80\">{otroUsuario}</span></p>\n                    </div>\n                    </Card>\n                )\n            })}\n            </div>\n        )}\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}}]
}